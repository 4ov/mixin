import{z as t}from"zod";import e from"cross-fetch";var r=t.object({name:t.string(),args:t.any().array()}),n=r.extend({type:t.literal("single")}),o=t.object({type:t.literal("group"),content:r.array()}),a=t.object({status:t.literal("fulfilled"),value:t.any()}),i=t.object({status:t.literal("rejected"),reason:t.any()}),u=a.or(i),c=u,s=u.array();c.or(s),n.or(o);var f=t.object({name:t.string(),message:t.string(),cause:t.any().optional(),stack:t.string().optional()});function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function y(t,e,r){return y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&p(o,r.prototype),o},y.apply(null,arguments)}function h(t){var e="function"==typeof Map?new Map:void 0;return h=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return y(t,arguments,l(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,t)},h(t)}var d=/*#__PURE__*/function(){function t(t,e,r){this.url=void 0,this.fnName=void 0,this.fnArgs=void 0,this.url=t,this.fnName=e,this.fnArgs=r}var r=t.prototype;return r.single=function(){try{var t=this;try{return Promise.resolve(e(t.url,{method:"POST",body:JSON.stringify({type:"single",name:t.fnName,args:t.fnArgs}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return c.safeParse(t)}).then(function(t){if(t.success)return t.data;throw new Error("bad Response")}).then(function(t){if("fulfilled"===t.status)return t.value;throw function(t){var e=f.safeParse(t);if(e.success){var r=e.data;return new(/*#__PURE__*/function(t){var e,n;function o(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).name=r.name,e.message=r.message,e.cause=r.cause,e.stack=r.stack,e}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,p(e,n),o}(/*#__PURE__*/h(Error)))}return new Error(t)}(t.reason)}))}catch(t){throw new Error("bad Response")}}catch(t){return Promise.reject(t)}},r.then=function(t,e){return this.single().then(t,e)},t}();function g(t,e){var r=new Proxy({},{get:function(t,r,n){if("$"===r)throw new Error("not implemented");return function(){try{var t=arguments;return Promise.resolve(new d(e,r.toString(),[].slice.call(t)))}catch(t){return Promise.reject(t)}}}});return r}export{g as default};
//# sourceMappingURL=client.esm.js.map
